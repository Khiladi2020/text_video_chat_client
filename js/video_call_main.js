const _0x4a4f=['287662NMsttR','getUserMedia','298ZFvEdN','call_declined','check_peer_status','onbeforeunload','getTracks','createOffer()\x20error:\x20','error','Adding\x20local\x20stream.','streams','onremovetrack','upgrade','log','setLocalDescription','setLocalAndSendMessage\x20sending\x20Message','declined','2KMtRuN','Remote\x20Stream\x20Added.','allowed\x20call','call_allowed','answer','3afSUZr','addTrack','stun:stun.l.google.com:19302','>>>\x20Creating\x20Peer\x20Connection','Failed\x20to\x20create\x20PeerConnection,\x20exception','close','setRemoteDescription','1QACkdl','43179YsbpcK','Unable\x20to\x20send\x20message','method','ConstraintNotSatisfiedError','querySelector','ontrack','1942tdneZO','catch','isInitiator','getUserMedia\x20','bye','createAnswer','clientId','PermissionDeniedError','includes','\x20:\x20','status','ice_candidate','Created\x20RTCPeerConnection','vcall_request','allowed','getVideoTracks','event','mediaDevices','addIceCandidate','1GSJnir','The\x20Resolution\x20Constraints\x20are\x20not\x20supported\x20by\x20your\x20device','offer_or_answer','caller_client','connection','declined\x20call\x20request','client_msg','SUCCESS,','FAILURE,','Hanging\x20up.','onclick','candidate','srcObject','message','icecandidate\x20event:','type','busy','readyState','215801MDfTnM','peer_left','289477GnUSQh','Call\x20ended\x20by\x20other\x20peer.','stringify','label','Message\x20Received\x20from\x20Client:','from','243989DTKxPE','Sending\x20offer\x20to\x20peer.\x20','got_user_media','user','then','name','forEach','46178CqwvPp','stop','Remote\x20stream\x20removed.\x20Event','Permissions\x20have\x20not\x20been\x20granted','pending','offer','#remote_video','video_chat','>>>\x20maybeStart()','vcallPeerId','notification','all_chats'];const _0x276a=function(_0x328370,_0x6b0e6d){_0x328370=_0x328370-0x1e0;let _0x4a4f94=_0x4a4f[_0x328370];return _0x4a4f94;};const _0x2ff791=_0x276a;(function(_0x3899dd,_0x2f799e){const _0xdf0bc8=_0x276a;while(!![]){try{const _0x2b3361=-parseInt(_0xdf0bc8(0x227))*-parseInt(_0xdf0bc8(0x21f))+-parseInt(_0xdf0bc8(0x1f6))+-parseInt(_0xdf0bc8(0x22d))*-parseInt(_0xdf0bc8(0x20b))+parseInt(_0xdf0bc8(0x240))*-parseInt(_0xdf0bc8(0x1f0))+-parseInt(_0xdf0bc8(0x21a))*-parseInt(_0xdf0bc8(0x1ee))+parseInt(_0xdf0bc8(0x1fd))*parseInt(_0xdf0bc8(0x226))+-parseInt(_0xdf0bc8(0x209));if(_0x2b3361===_0x2f799e)break;else _0x3899dd['push'](_0x3899dd['shift']());}catch(_0x37b2ef){_0x3899dd['push'](_0x3899dd['shift']());}}}(_0x4a4f,0x59169));var localStream,pc,remoteStream,turnReady,clientId,vcallPeer,isChannelReady=!0x1,isInitiator=!0x1,isStarted=!0x1,pcConfig={'iceServers':[{'urls':_0x2ff791(0x221)}]};function handle_client_messages(_0x2a793a){const _0x783b4c=_0x2ff791;if(getState()[_0x783b4c(0x208)][_0x783b4c(0x235)](_0x2a793a['from'])||(createChat(0x0,_0x2a793a[_0x783b4c(0x1f5)]),set_append_all_chat_array(_0x2a793a['from'])),console[_0x783b4c(0x216)](_0x783b4c(0x1f4),_0x2a793a),_0x783b4c(0x23a)===_0x2a793a['type']){if(_0x783b4c(0x201)===_0x2a793a['status']){let _0x3fe570={'command':_0x783b4c(0x23a),'group':_0x783b4c(0x204),'toPeer':_0x2a793a[_0x783b4c(0x1f5)]};new Promise((_0x494b50,_0x3f7c9d)=>{const _0x3ef61f=_0x783b4c;show_request_modal(_0x2a793a[_0x3ef61f(0x1f5)]),modal_allow_btn['onclick']=()=>{const _0x2eecd1=_0x3ef61f;_0x494b50(_0x2eecd1(0x21d));},modal_cancel_btn[_0x3ef61f(0x1e6)]=()=>{const _0xc79260=_0x3ef61f;_0x3f7c9d(_0xc79260(0x20c));};})['then'](_0x447a02=>{const _0x5cdc96=_0x783b4c;console['log'](_0x5cdc96(0x1e3),_0x447a02),_0x3fe570[_0x5cdc96(0x237)]=_0x5cdc96(0x23b),sendMessage(_0x3fe570),start_video();},_0x355017=>{const _0x17eba1=_0x783b4c;console[_0x17eba1(0x216)](_0x17eba1(0x1e4),_0x355017),_0x3fe570['status']=_0x17eba1(0x219),sendMessage(_0x3fe570);});}else'allowed'===_0x2a793a[_0x783b4c(0x237)]?(console[_0x783b4c(0x216)](_0x2a793a['from'],_0x783b4c(0x21c)),start_video()):'declined'===_0x2a793a[_0x783b4c(0x237)]&&console[_0x783b4c(0x216)](_0x2a793a[_0x783b4c(0x1f5)],_0x783b4c(0x1e1));}else{if(_0x783b4c(0x1f8)===_0x2a793a[_0x783b4c(0x1eb)])isChannelReady=!0x0,maybeStart();else{if(_0x783b4c(0x202)===_0x2a793a[_0x783b4c(0x1eb)])isInitiator||isStarted||maybeStart(),pc[_0x783b4c(0x225)](new RTCSessionDescription(_0x2a793a[_0x783b4c(0x1e9)])),doAnswer();else{if(_0x783b4c(0x21e)===_0x2a793a['type']&&isStarted)pc[_0x783b4c(0x225)](new RTCSessionDescription(_0x2a793a['message']));else{if(_0x783b4c(0x1e7)===_0x2a793a['type']){const _0x1bb8d5=new RTCIceCandidate(_0x2a793a[_0x783b4c(0x1e7)]);pc[_0x783b4c(0x23f)](_0x1bb8d5);}else _0x783b4c(0x231)===_0x2a793a[_0x783b4c(0x1eb)]&&isStarted&&handleRemoteHangup();}}}}}function handle_incoming_video_messages(_0x4a1674){const _0x109733=_0x2ff791;_0x109733(0x207)===_0x4a1674[_0x109733(0x229)]?_0x109733(0x1e0)===_0x4a1674['event']?(clientId=_0x4a1674[_0x109733(0x233)],console['log'](_0x4a1674[_0x109733(0x1e9)])):_0x109733(0x215)===_0x4a1674[_0x109733(0x23d)]?(isInitiator=!0x0,console['log'](_0x4a1674[_0x109733(0x1e9)])):_0x109733(0x1ef)===_0x4a1674[_0x109733(0x23d)]&&(handleRemoteHangup(),console[_0x109733(0x216)](_0x4a1674[_0x109733(0x1e9)])):_0x109733(0x20d)===_0x4a1674[_0x109733(0x229)]?_0x109733(0x1ec)===_0x4a1674[_0x109733(0x237)]?console[_0x109733(0x216)](_0x4a1674[_0x109733(0x206)]+'\x20is\x20busy\x20on\x20other\x20call\x20'):'not_busy'===_0x4a1674[_0x109733(0x237)]&&(console[_0x109733(0x216)](_0x4a1674[_0x109733(0x206)]+'\x20is\x20ready\x20for\x20call\x20'),isInitiator=!0x0,send_vcall_request()):'join_request'===_0x4a1674[_0x109733(0x229)]?(console[_0x109733(0x216)]('Another\x20peer\x20made\x20a\x20request\x20to\x20make\x20a\x20call.\x20Peer\x20Id:\x20'+_0x4a1674[_0x109733(0x243)]),isChannelReady=!0x0,start_video()):_0x109733(0x216)===_0x4a1674[_0x109733(0x229)]?console[_0x109733(0x216)]['apply'](console,_0x4a1674[_0x109733(0x1e9)]):_0x109733(0x1e2)===_0x4a1674[_0x109733(0x229)]?handle_client_messages(_0x4a1674):console['log'](_0x4a1674[_0x109733(0x1e9)]);}function sendMessage(_0x4f2dae){const _0x893906=_0x2ff791;socket[_0x893906(0x1ed)]===WebSocket['OPEN']?(_0x4f2dae[_0x893906(0x233)]=clientId,socket['send'](JSON[_0x893906(0x1f2)](_0x4f2dae))):console[_0x893906(0x216)](_0x893906(0x228));}function send_vcall_request(){const _0x3522fb=_0x2ff791;void 0x0!==vcallPeer&&sendMessage({'command':_0x3522fb(0x23a),'group':_0x3522fb(0x204),'status':_0x3522fb(0x201),'toPeer':vcallPeer});}function sendRoomCode(){const _0x448bab=_0x2ff791,_0x2fcb2e=getState();sendMessage({'group':'video_chat','command':'check_peer_status','vcallPeerId':vcallPeer=_0x2fcb2e[_0x448bab(0x1f9)]});}var localVideo=document[_0x2ff791(0x22b)]('#local_video'),remoteVideo=document[_0x2ff791(0x22b)](_0x2ff791(0x203));const constraints={'audio':!0x0,'video':!0x0};function start_video(){const _0x2a6db7=_0x2ff791;navigator[_0x2a6db7(0x23e)][_0x2a6db7(0x20a)](constraints)[_0x2a6db7(0x1fa)](gotLocalStream)[_0x2a6db7(0x22e)](handleLocalStreamError);}function gotLocalStream(_0x4c5137){const _0x4797b5=_0x2ff791;console[_0x4797b5(0x216)](_0x4797b5(0x212));const _0x3701ba=_0x4c5137[_0x4797b5(0x23c)]();console[_0x4797b5(0x216)]('Using\x20video\x20device:\x20'+_0x3701ba[0x0][_0x4797b5(0x1f3)]),localStream=_0x4c5137,localVideo[_0x4797b5(0x1e8)]=_0x4c5137,(sendMessage({'group':_0x4797b5(0x204),'command':_0x4797b5(0x1f8)}),isInitiator&&maybeStart());}function handleLocalStreamError(_0x1aac36){const _0x36ac38=_0x2ff791;_0x36ac38(0x22a)===_0x1aac36[_0x36ac38(0x1fb)]?console['log'](_0x36ac38(0x241)):_0x36ac38(0x234)===_0x1aac36['name']&&console['log'](_0x36ac38(0x200)),console[_0x36ac38(0x216)](_0x36ac38(0x230)+_0x1aac36[_0x36ac38(0x1fb)]+_0x36ac38(0x236)+_0x1aac36[_0x36ac38(0x1e9)]);}function maybeStart(){const _0x4f8d47=_0x2ff791;console[_0x4f8d47(0x216)](_0x4f8d47(0x205),isStarted,localStream,isChannelReady),!isStarted&&void 0x0!==localStream&&isChannelReady&&(console['log'](_0x4f8d47(0x222)),createPeerConnection(),localStream[_0x4f8d47(0x20f)]()[_0x4f8d47(0x1fc)](_0xa4a055=>pc[_0x4f8d47(0x220)](_0xa4a055,localStream)),isStarted=!0x0,console[_0x4f8d47(0x216)](_0x4f8d47(0x22f),isInitiator),isInitiator&&doCall());}function createPeerConnection(){const _0x5d50f2=_0x2ff791;try{(pc=new RTCPeerConnection(pcConfig))['onicecandidate']=handleIceCandidate,pc[_0x5d50f2(0x22c)]=handleTrackEvent,pc[_0x5d50f2(0x214)]=handleRemoveTrackEvent,console['log'](_0x5d50f2(0x239));}catch(_0x11f0b5){return void console[_0x5d50f2(0x216)](_0x5d50f2(0x223),_0x11f0b5[_0x5d50f2(0x1e9)]);}}function handleIceCandidate(_0x5b13f7){const _0x270501=_0x2ff791;if(console[_0x270501(0x216)](_0x270501(0x1ea),_0x5b13f7),_0x5b13f7[_0x270501(0x1e7)])sendMessage({'group':_0x270501(0x204),'command':_0x270501(0x238),'candidate':_0x5b13f7[_0x270501(0x1e7)]});else console['log']('End\x20of\x20candidates');}function handleCreateOfferError(_0x1855d1){const _0x3c1541=_0x2ff791;console[_0x3c1541(0x216)](_0x3c1541(0x210),_0x1855d1);}function doCall(){const _0x3de3a2=_0x2ff791;console[_0x3de3a2(0x216)](_0x3de3a2(0x1f7)),pc['createOffer'](setLocalAndSendMessage,handleCreateOfferError);}function doAnswer(){const _0x416907=_0x2ff791;console[_0x416907(0x216)]('Sending\x20answer\x20to\x20peer.\x20'),pc[_0x416907(0x232)]()['then'](setLocalAndSendMessage,onCreateSessionDescriptionError);}function setLocalAndSendMessage(_0x495f13){const _0x54d525=_0x2ff791;pc[_0x54d525(0x217)](_0x495f13),console[_0x54d525(0x216)](_0x54d525(0x218),_0x495f13),sendMessage({'group':_0x54d525(0x204),'command':_0x54d525(0x242),'message':_0x495f13});}function onCreateSessionDescriptionError(_0x5bc7bc){const _0x7078d7=_0x2ff791;console[_0x7078d7(0x216)](_0x7078d7(0x211));}function handleTrackEvent(_0xbbd688){const _0xd64a7c=_0x2ff791;console['log'](_0xd64a7c(0x21b)),remoteStream=_0xbbd688[_0xd64a7c(0x213)][0x0],remoteVideo[_0xd64a7c(0x1e8)]=remoteStream;}function handleRemoveTrackEvent(){const _0x26426a=_0x2ff791;console[_0x26426a(0x216)](_0x26426a(0x1ff),event);}function hangup(){const _0x1827da=_0x2ff791;console['log'](_0x1827da(0x1e5)),stop(),sendMessage({'group':_0x1827da(0x204),'command':_0x1827da(0x231)});}function handleRemoteHangup(){const _0x5b6b5c=_0x2ff791;console[_0x5b6b5c(0x216)](_0x5b6b5c(0x1f1)),stop();}function stop(){const _0xa6c63b=_0x2ff791;pc[_0xa6c63b(0x224)](),pc=null,isStarted=!0x1,isChannelReady=!0x1,isInitiator=!0x1,remoteVideo[_0xa6c63b(0x1e8)]&&remoteVideo['srcObject']['getTracks']()['forEach'](_0x25c030=>_0x25c030[_0xa6c63b(0x1fe)]()),localVideo['srcObject']&&localVideo[_0xa6c63b(0x1e8)][_0xa6c63b(0x20f)]()['forEach'](_0x529fb7=>_0x529fb7[_0xa6c63b(0x1fe)]()),localStream=void 0x0;}window[_0x2ff791(0x20e)]=()=>{const _0x592dbd=_0x2ff791;isStarted&&sendMessage({'group':_0x592dbd(0x204),'command':'bye'});};